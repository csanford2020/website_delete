---
title: 'Professor Evaluations '
author: ''
date: '2022-02-28'
slug: professor-evaluations
categories: []
tags: []
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="preliminaries" class="section level2">
<h2>preliminaries</h2>
<pre class="r"><code>library(moderndive)
library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.6     v dplyr   1.0.7
## v tidyr   1.2.0     v stringr 1.4.0
## v readr   2.1.2     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(skimr)
library(gapminder)</code></pre>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory data analysis</h2>
<pre class="r"><code>evals_ch5 &lt;- evals %&gt;%
  select(ID, score, bty_avg, age)
glimpse(evals_ch5)</code></pre>
<pre><code>## Rows: 463
## Columns: 4
## $ ID      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,~
## $ score   &lt;dbl&gt; 4.7, 4.1, 3.9, 4.8, 4.6, 4.3, 2.8, 4.1, 3.4, 4.5, 3.8, 4.5, 4.~
## $ bty_avg &lt;dbl&gt; 5.000, 5.000, 5.000, 5.000, 3.000, 3.000, 3.000, 3.333, 3.333,~
## $ age     &lt;int&gt; 36, 36, 36, 36, 59, 59, 59, 51, 51, 40, 40, 40, 40, 40, 40, 40~</code></pre>
<pre class="r"><code>evals_ch5 %&gt;%
  sample_n(size = 5)</code></pre>
<pre><code>## # A tibble: 5 x 4
##      ID score bty_avg   age
##   &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
## 1   322   3.9    2.33    52
## 2   355   4.9    3.33    50
## 3    86   4.4    4.17    45
## 4    72   3.9    4.83    42
## 5   261   4.6    3.17    52</code></pre>
</div>
<div id="exploring-the-data" class="section level2">
<h2>exploring the data</h2>
<pre class="r"><code>glimpse(evals_ch5)</code></pre>
<pre><code>## Rows: 463
## Columns: 4
## $ ID      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,~
## $ score   &lt;dbl&gt; 4.7, 4.1, 3.9, 4.8, 4.6, 4.3, 2.8, 4.1, 3.4, 4.5, 3.8, 4.5, 4.~
## $ bty_avg &lt;dbl&gt; 5.000, 5.000, 5.000, 5.000, 3.000, 3.000, 3.000, 3.333, 3.333,~
## $ age     &lt;int&gt; 36, 36, 36, 36, 59, 59, 59, 51, 51, 40, 40, 40, 40, 40, 40, 40~</code></pre>
</div>
<div id="sample-the-data" class="section level2">
<h2>Sample the data</h2>
<pre class="r"><code>evals_ch5 %&gt;%
  sample_n(size = 5)</code></pre>
<pre><code>## # A tibble: 5 x 4
##      ID score bty_avg   age
##   &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
## 1   106   4.9    4.33    46
## 2   118   3.8    4.33    57
## 3   227   3.3    8.17    39
## 4   399   3.6    2.83    57
## 5     3   3.9    5       36</code></pre>
</div>
<div id="mean-and-median-of-bty-and-score" class="section level2">
<h2>Mean and Median of BTY and Score</h2>
<pre class="r"><code>evals_ch5 %&gt;%
  summarize(mean_bty_avg = mean(bty_avg), mean_score = mean(score),
            median_bty_avg = median(bty_avg), median_score = median(score))</code></pre>
<pre><code>## # A tibble: 1 x 4
##   mean_bty_avg mean_score median_bty_avg median_score
##          &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;
## 1         4.42       4.17           4.33          4.3</code></pre>
</div>
<div id="five-number-summary" class="section level2">
<h2>five number summary</h2>
<pre class="r"><code>evals_ch5 %&gt;% select(score, bty_avg) %&gt;% skim()</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-6">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">463</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">score</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4.17</td>
<td align="right">0.54</td>
<td align="right">2.30</td>
<td align="right">3.80</td>
<td align="right">4.30</td>
<td align="right">4.6</td>
<td align="right">5.00</td>
<td align="left">▁▁▅▇▇</td>
</tr>
<tr class="even">
<td align="left">bty_avg</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4.42</td>
<td align="right">1.53</td>
<td align="right">1.67</td>
<td align="right">3.17</td>
<td align="right">4.33</td>
<td align="right">5.5</td>
<td align="right">8.17</td>
<td align="left">▃▇▇▃▂</td>
</tr>
</tbody>
</table>
</div>
<div id="visualizing-data" class="section level2">
<h2>visualizing data</h2>
<pre class="r"><code>ggplot(evals_ch5, aes(x = bty_avg, y = score)) +
  geom_point() +
  labs(x = &quot;Beauty Score&quot;, 
       y = &quot;Teaching Score&quot;,
       title = &quot;Scatterplot of relationship of teaching and beauty scores&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="adding-jitter" class="section level2">
<h2>adding jitter</h2>
<pre class="r"><code>ggplot(evals_ch5, aes(x = bty_avg, y = score)) +
  geom_jitter() +
  labs(x = &quot;Beauty Score&quot;, y = &quot;Teaching Score&quot;,
       title = &quot;Scatterplot of relationship of teaching and beauty scores&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="relationship-between-beauty-and-teaching-scores" class="section level2">
<h2>relationship between beauty and teaching scores</h2>
<pre class="r"><code>ggplot(evals_ch5, aes(x = bty_avg, y = score)) +
  geom_point() +
  labs(x = &quot;Beauty Score&quot;, y = &quot;Teaching Score&quot;,
       title = &quot;Relationship between teaching and beauty scores&quot;) +  
  geom_smooth(method = &quot;lm&quot;, se = FALSE)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-9-1.png" width="672" />
## simple linear regression</p>
<pre class="r"><code># Fit regression model:
score_model &lt;- lm(score ~ bty_avg, data = evals_ch5)
# Get regression table:
get_regression_table(score_model)</code></pre>
<pre><code>## # A tibble: 2 x 7
##   term      estimate std_error statistic p_value lower_ci upper_ci
##   &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 intercept    3.88      0.076     51.0        0    3.73     4.03 
## 2 bty_avg      0.067     0.016      4.09       0    0.035    0.099</code></pre>
<pre class="r"><code># Fit regression model:
score_model &lt;- lm(score ~ bty_avg, data = evals_ch5)
# Get regression table:
get_regression_table(score_model)</code></pre>
<pre><code>## # A tibble: 2 x 7
##   term      estimate std_error statistic p_value lower_ci upper_ci
##   &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 intercept    3.88      0.076     51.0        0    3.73     4.03 
## 2 bty_avg      0.067     0.016      4.09       0    0.035    0.099</code></pre>
<p>##Observed/fitted values and residuals</p>
<pre class="r"><code>regression_points &lt;- get_regression_points(score_model)
regression_points</code></pre>
<pre><code>## # A tibble: 463 x 5
##       ID score bty_avg score_hat residual
##    &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1     1   4.7    5         4.21    0.486
##  2     2   4.1    5         4.21   -0.114
##  3     3   3.9    5         4.21   -0.314
##  4     4   4.8    5         4.21    0.586
##  5     5   4.6    3         4.08    0.52 
##  6     6   4.3    3         4.08    0.22 
##  7     7   2.8    3         4.08   -1.28 
##  8     8   4.1    3.33      4.10   -0.002
##  9     9   3.4    3.33      4.10   -0.702
## 10    10   4.5    3.17      4.09    0.409
## # ... with 453 more rows</code></pre>
<p>The score column represents the observed outcome variable<br />
y
. This is the y-position of the 463 black points.
The bty_avg column represents the values of the explanatory variable<br />
x
. This is the x-position of the 463 black points.
The score_hat column represents the fitted values<br />
ˆ
y
. This is the corresponding value on the regression line for the 463<br />
x
values.
The residual column represents the residuals<br />
y
−
ˆ
y
. This is the 463 vertical distances between the 463 black points and the regression line.
##One categorical explanatory variable
It’s an unfortunate truth that life expectancy is not the same across all countries in the world. International development agencies are interested in studying these differences in life expectancy in the hopes of identifying where governments should allocate resources to address this problem. In this section, we’ll explore differences in life expectancy in two ways:</p>
<p>Differences between continents: Are there significant differences in average life expectancy between the five populated continents of the world: Africa, the Americas, Asia, Europe, and Oceania?
Differences within continents: How does life expectancy vary within the world’s five continents? For example, is the spread of life expectancy among the countries of Africa larger than the spread of life expectancy among the countries of Asia?
To answer such questions, we’ll use the gapminder data frame included in the gapminder package. This dataset has international development statistics such as life expectancy, GDP per capita, and population for 142 countries for 5-year intervals between 1952 and 2007. Recall we visualized some of this data in Figure 2.1 in Subsection 2.1.2 on the grammar of graphics.</p>
<p>We’ll use this data for basic regression again, but now using an explanatory variable<br />
x
that is categorical, as opposed to the numerical explanatory variable model we used in the previous Section 5.1.</p>
<p>A numerical outcome variable<br />
y
(a country’s life expectancy) and
A single categorical explanatory variable<br />
x
(the continent that the country is a part of).
When the explanatory variable<br />
x
is categorical, the concept of a “best-fitting” regression line is a little different than the one we saw previously in Section 5.1 where the explanatory variable<br />
x
was numerical. We’ll study these differences shortly in Subsection 5.2.2, but first we conduct an exploratory data analysis.
##Exploratory data analysis</p>
<pre class="r"><code>library(gapminder)
gapminder2007 &lt;- gapminder %&gt;%
  filter(year == 2007) %&gt;%
  select(country, lifeExp, continent, gdpPercap)
glimpse(gapminder2007)</code></pre>
<pre><code>## Rows: 142
## Columns: 4
## $ country   &lt;fct&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Algeria&quot;, &quot;Angola&quot;, &quot;Argentina&quot;, ~
## $ lifeExp   &lt;dbl&gt; 43.828, 76.423, 72.301, 42.731, 75.320, 81.235, 79.829, 75.6~
## $ continent &lt;fct&gt; Asia, Europe, Africa, Africa, Americas, Oceania, Europe, Asi~
## $ gdpPercap &lt;dbl&gt; 974.5803, 5937.0295, 6223.3675, 4797.2313, 12779.3796, 34435~</code></pre>
</div>
<div id="random-sample-of-the-data" class="section level2">
<h2>Random Sample of the data</h2>
<pre class="r"><code>gapminder2007 %&gt;% sample_n(size = 5)</code></pre>
<pre><code>## # A tibble: 5 x 4
##   country   lifeExp continent gdpPercap
##   &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt;
## 1 Norway       80.2 Europe       49357.
## 2 Indonesia    70.6 Asia          3541.
## 3 Austria      79.8 Europe       36126.
## 4 Oman         75.6 Asia         22316.
## 5 Kenya        54.1 Africa        1463.</code></pre>
<div id="summarizing-whole-data" class="section level3">
<h3>summarizing whole data</h3>
<pre class="r"><code>gapminder2007 %&gt;%
  select(lifeExp, continent) %&gt;%
  skim()</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-14">Table 2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">142</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">continent</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">5</td>
<td align="left">Afr: 52, Asi: 33, Eur: 30, Ame: 25</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lifeExp</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">67.01</td>
<td align="right">12.07</td>
<td align="right">39.61</td>
<td align="right">57.16</td>
<td align="right">71.94</td>
<td align="right">76.41</td>
<td align="right">82.6</td>
<td align="left">▂▃▃▆▇</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ggplot-of-life-expactancies" class="section level2">
<h2>GGplot of life expactancies</h2>
<pre class="r"><code>ggplot(gapminder2007, aes(x = lifeExp)) +
  geom_histogram(binwidth = 5, color = &quot;white&quot;) +
  labs(x = &quot;Life expectancy&quot;, y = &quot;Number of countries&quot;,
       title = &quot;Histogram of distribution of worldwide life expectancies&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-15-1.png" width="672" />
##Adding Facet</p>
<pre class="r"><code>ggplot(gapminder2007, aes(x = lifeExp)) +
  geom_histogram(binwidth = 5, color = &quot;white&quot;) +
  labs(x = &quot;Life expectancy&quot;, 
       y = &quot;Number of countries&quot;,
       title = &quot;Histogram of distribution of worldwide life expectancies&quot;) +
  facet_wrap(~ continent, nrow = 2)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-16-1.png" width="672" />
## Alternative way of graphing life expectancies</p>
<pre class="r"><code>ggplot(gapminder2007, aes(x = continent, y = lifeExp)) +
  geom_boxplot() +
  labs(x = &quot;Continent&quot;, y = &quot;Life expectancy&quot;,
       title = &quot;Life expectancy by continent&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-17-1.png" width="672" />
##Computing the mean and median of life expectancy</p>
<pre class="r"><code>lifeExp_by_continent &lt;- gapminder2007 %&gt;%
  group_by(continent) %&gt;%
  summarize(median = median(lifeExp), 
            mean = mean(lifeExp))</code></pre>
</div>
<div id="linear-regression-of-life-expectancy" class="section level2">
<h2>Linear regression of life expectancy</h2>
<pre class="r"><code>lifeExp_model &lt;- lm(lifeExp ~ continent, data = gapminder2007)
get_regression_table(lifeExp_model)</code></pre>
<pre><code>## # A tibble: 5 x 7
##   term                estimate std_error statistic p_value lower_ci upper_ci
##   &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 intercept               54.8      1.02     53.4        0     52.8     56.8
## 2 continent: Americas     18.8      1.8      10.4        0     15.2     22.4
## 3 continent: Asia         15.9      1.65      9.68       0     12.7     19.2
## 4 continent: Europe       22.8      1.70     13.5        0     19.5     26.2
## 5 continent: Oceania      25.9      5.33      4.86       0     15.4     36.4</code></pre>
</div>
<div id="observedfitted-values-and-residuals-for-life-expectanies" class="section level2">
<h2>Observed/fitted values and residuals for life expectanies</h2>
<pre class="r"><code>regression_points &lt;- get_regression_points(lifeExp_model, ID = &quot;country&quot;)
regression_points</code></pre>
<pre><code>## # A tibble: 142 x 5
##    country     lifeExp continent lifeExp_hat residual
##    &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;
##  1 Afghanistan    43.8 Asia             70.7  -26.9  
##  2 Albania        76.4 Europe           77.6   -1.23 
##  3 Algeria        72.3 Africa           54.8   17.5  
##  4 Angola         42.7 Africa           54.8  -12.1  
##  5 Argentina      75.3 Americas         73.6    1.71 
##  6 Australia      81.2 Oceania          80.7    0.516
##  7 Austria        79.8 Europe           77.6    2.18 
##  8 Bahrain        75.6 Asia             70.7    4.91 
##  9 Bangladesh     64.1 Asia             70.7   -6.67 
## 10 Belgium        79.4 Europe           77.6    1.79 
## # ... with 132 more rows</code></pre>
</div>
<div id="chapter-website-used" class="section level2">
<h2>Chapter website used</h2>
<p><a href="https://moderndive.netlify.app/5-regression.html#model2" class="uri">https://moderndive.netlify.app/5-regression.html#model2</a></p>
</div>
